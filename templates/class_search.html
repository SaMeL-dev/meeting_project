<<<<<<< HEAD
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œëª¨ì„ - í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #4285F4;
            text-align: center;
            margin-bottom: 30px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .nav-links {
            text-align: center;
            margin-top: 30px;
        }
        .nav-links a {
            display: inline-block;
            margin: 10px;
            padding: 10px 20px;
            background: #4285F4;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        .nav-links a:hover {
            background: #3367D6;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            margin: 5px;
            flex: 1;
            min-width: 120px;
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4285F4;
        }
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‰ Django ì†Œëª¨ì„ í”„ë¡œì íŠ¸ ì„±ê³µ! ğŸ‰</h1>
        
        <div class="success">
            <strong>ì¶•í•˜í•©ë‹ˆë‹¤!</strong> Django ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê³  ìˆìŠµë‹ˆë‹¤.
        </div>
        
        <div class="info">
            <strong>í˜„ì¬ ìƒíƒœ:</strong> ë°±ì—”ë“œ ì‹œìŠ¤í…œì´ ì™„ë²½í•˜ê²Œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
            <br>â€¢ ë°ì´í„°ë² ì´ìŠ¤: âœ… ì™„ë£Œ
            <br>â€¢ ëª¨ë¸ (íšŒì›, ëª¨ì„, ê²Œì‹œê¸€): âœ… ì™„ë£Œ  
            <br>â€¢ ë·° í•¨ìˆ˜ë“¤: âœ… ì™„ë£Œ
            <br>â€¢ URL ë¼ìš°íŒ…: âœ… ì™„ë£Œ
            <br>â€¢ í¼ ì²˜ë¦¬: âœ… ì™„ë£Œ
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number">{{ total_classes|default:0 }}</div>
                <div class="stat-label">ë“±ë¡ëœ ëª¨ì„</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ total_members|default:0 }}</div>
                <div class="stat-label">ê°€ì… íšŒì›</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ total_interests|default:0 }}</div>
                <div class="stat-label">ê´€ì‹¬ì‚¬</div>
            </div>
        </div>

        <div class="nav-links">
            <a href="/login/">ë¡œê·¸ì¸ í˜ì´ì§€</a>
            <a href="/register/">íšŒì›ê°€ì… í˜ì´ì§€</a>
            <a href="/admin/">ê´€ë¦¬ì í˜ì´ì§€</a>
            <a href="/classes/">ëª¨ì„ ëª©ë¡</a>
        </div>

        <div style="margin-top: 30px; padding: 20px; background: #fff3cd; border-radius: 5px;">
            <h3>ğŸš€ ë‹¤ìŒ ë‹¨ê³„</h3>
            <p><strong>1ë‹¨ê³„:</strong> ê´€ë¦¬ì ê³„ì • ë§Œë“¤ê¸° - <code>python manage.py createsuperuser</code></p>
            <p><strong>2ë‹¨ê³„:</strong> ìƒ˜í”Œ ë°ì´í„° ì¶”ê°€í•˜ê¸°</p>
            <p><strong>3ë‹¨ê³„:</strong> í…œí”Œë¦¿ ë””ìì¸ ê°œì„ í•˜ê¸°</p>
        </div>
    </div>
</body>
</html>
=======
<!-- templates/class_search.html -->
{% extends 'base.html' %}

{% block title %}ìš°ë¦¬ë™ë„¤ ì·¨ë¯¸ ëª¨ì„ - ì†Œëª¨ì„{% endblock %}

{% block content %}
<!-- íˆì–´ë¡œ ì„¹ì…˜ -->
<div class="hero-section">
    <h1 class="display-4 fw-bold mb-3">
        <i class="fas fa-users"></i> ìš°ë¦¬ë™ë„¤ ì·¨ë¯¸ ëª¨ì„
    </h1>
    <p class="lead">{{ total_interests }}ê°œ ì¹´í…Œê³ ë¦¬ì˜ {{ total_classes }}ê°œ ëª¨ì„ì´ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”!</p>
</div>

<!-- ì¹´í…Œê³ ë¦¬ë³„ ëª¨ì„ ì°¾ê¸° -->
<div class="search-container">
    <h4 class="mb-4">ì¹´í…Œê³ ë¦¬ë³„ ëª¨ì„ ì°¾ê¸°</h4>
    
    <!-- ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ë“¤ -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="btn-group flex-wrap" role="group">
                <a href="{% url 'classes' %}" class="btn {% if current_category == 'all' %}btn-primary{% else %}btn-outline-primary{% endif %}">
                    <i class="fas fa-home"></i> ì „ì²´
                </a>
                <a href="{% url 'classes' %}?category=sports" class="btn {% if current_category == 'sports' %}btn-primary{% else %}btn-outline-primary{% endif %}">
                    <i class="fas fa-running"></i> ìš´ë™/ìŠ¤í¬ì¸ 
                </a>
                <a href="{% url 'classes' %}?category=study" class="btn {% if current_category == 'study' %}btn-primary{% else %}btn-outline-primary{% endif %}">
                    <i class="fas fa-book"></i> ìŠ¤í„°ë””
                </a>
                <a href="{% url 'classes' %}?category=hobby" class="btn {% if current_category == 'hobby' %}btn-primary{% else %}btn-outline-primary{% endif %}">
                    <i class="fas fa-palette"></i> ì·¨ë¯¸/ì—¬ê°€
                </a>
                <a href="{% url 'classes' %}?category=culture" class="btn {% if current_category == 'culture' %}btn-primary{% else %}btn-outline-primary{% endif %}">
                    <i class="fas fa-theater-masks"></i> ë¬¸í™”/ì˜ˆìˆ 
                </a>
                <a href="{% url 'classes' %}?category=lifestyle" class="btn {% if current_category == 'lifestyle' %}btn-primary{% else %}btn-outline-primary{% endif %}">
                    <i class="fas fa-leaf"></i> ë¼ì´í”„ìŠ¤íƒ€ì¼
                </a>
            </div>
        </div>
    </div>
    
    <!-- ê²€ìƒ‰ í¼ -->
    <form method="get" class="row g-3">
        <div class="col-md-5">
            <div class="input-group">
                <span class="input-group-text">
                    <i class="fas fa-search"></i>
                </span>
                {{ form.keyword }}
            </div>
        </div>
        <div class="col-md-3">
            {{ form.interest }}
        </div>
        <div class="col-md-2">
            <select name="sort" class="form-select">
                <option value="recent" {% if current_sort == 'recent' %}selected{% endif %}>ìµœì‹ ìˆœ</option>
                <option value="popular" {% if current_sort == 'popular' %}selected{% endif %}>ì¸ê¸°ìˆœ</option>
                <option value="name" {% if current_sort == 'name' %}selected{% endif %}>ì´ë¦„ìˆœ</option>
            </select>
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">
                <i class="fas fa-search"></i> ê²€ìƒ‰
            </button>
        </div>
    </form>
</div>

<!-- í†µê³„ ì¹´ë“œë“¤ -->
<div class="row mb-4">
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stats-card">
            <div class="stats-number">{{ total_classes }}</div>
            <div class="text-muted">í™œë™ ì¤‘ì¸ ëª¨ì„</div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stats-card">
            <div class="stats-number">{{ total_members }}</div>
            <div class="text-muted">ë“±ë¡ëœ íšŒì›</div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stats-card">
            <div class="stats-number">{{ total_interests }}</div>
            <div class="text-muted">ê´€ì‹¬ì‚¬ ì¹´í…Œê³ ë¦¬</div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stats-card">
            <div class="stats-number">{{ total_participants }}</div>
            <div class="text-muted">ì´ ì°¸ì—¬ì</div>
        </div>
    </div>
</div>

<!-- ì „ì²´ ëª¨ì„ ì„¹ì…˜ -->
<div class="row mb-3">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <h3>
                <i class="fas fa-fire text-danger"></i> 
                {% if current_category != 'all' %}
                    {{ current_category|title }} ëª¨ì„
                {% else %}
                    ì „ì²´ ëª¨ì„
                {% endif %}
                {% if current_keyword %}
                    <span class="badge bg-info">"{{ current_keyword }}" ê²€ìƒ‰ê²°ê³¼</span>
                {% endif %}
            </h3>
            <div class="text-muted">
                ì´ {{ classes.paginator.count }}ê°œ ëª¨ì„
            </div>
        </div>
    </div>
</div>

<!-- ëª¨ì„ ì¹´ë“œ ê·¸ë¦¬ë“œ -->
<div class="row">
    {% for class in classes %}
    <div class="col-lg-4 col-md-6 mb-4">
        <div class="card card-custom h-100">
            <!-- ëª¨ì„ ì´ë¯¸ì§€ ì˜ì—­ -->
            <div class="position-relative">
                <div class="card-img-top" style="height: 200px; background: linear-gradient(45deg, 
                    {% if class.interestID.interestName|lower in 'í…Œë‹ˆìŠ¤,ë°°ë“œë¯¼í„´,ì¶•êµ¬,ë†êµ¬,ì•¼êµ¬,ë°°êµ¬,ìˆ˜ì˜,ìš”ê°€,í•„ë¼í…ŒìŠ¤,í—¬ìŠ¤,í¬ë¡œìŠ¤í•,ëŸ¬ë‹,ë§ˆë¼í†¤,ë“±ì‚°,íŠ¸ë ˆí‚¹,í´ë¼ì´ë°,ê³¨í”„,ë³¼ë§' %}#667eea, #764ba2
                    {% elif class.interestID.interestName|lower in 'ì˜ì–´,ì¤‘êµ­ì–´,ì¼ë³¸ì–´,java,python,í† ìµ,í† í”Œ,ë…ì„œ,í”„ë¡œê·¸ë˜ë°,íˆ¬ì,ì£¼ì‹,ê²½ì œ' %}#f093fb, #f5576c
                    {% elif class.interestID.interestName|lower in 'ìš”ë¦¬,ë² ì´í‚¹,ì»¤í”¼,ì™€ì¸,ì—¬í–‰,ê²Œì„,ì¹´í˜,ë§›ì§‘,ì‡¼í•‘,íŒ¨ì…˜' %}#4facfe, #00f2fe
                    {% elif class.interestID.interestName|lower in 'ì˜í™”,ì—°ê·¹,ë®¤ì§€ì»¬,ì½˜ì„œíŠ¸,ìŒì•…,ë¯¸ìˆ ,ì‚¬ì§„,ì „ì‹œíšŒ,ê°¤ëŸ¬ë¦¬' %}#43e97b, #38f9d7
                    {% else %}#ffecd2, #fcb69f
                    {% endif %}); display: flex; align-items: center; justify-content: center; border-radius: 12px 12px 0 0;">
                    <div class="text-center text-white">
                        <i class="fas fa-users fa-3x opacity-75 mb-2"></i>
                        <div class="fw-bold">{{ class.member_count }}ëª… ì°¸ì—¬</div>
                    </div>
                </div>
                
                <!-- ë±ƒì§€ë“¤ -->
                <div class="position-absolute top-0 end-0 m-2">
                    <span class="badge bg-primary">
                        {{ class.interestID.interestName }}
                    </span>
                </div>
                
                {% if class.member_count > 5 %}
                <div class="position-absolute top-0 start-0 m-2">
                    <span class="badge bg-warning text-dark">
                        <i class="fas fa-fire"></i> HOT
                    </span>
                </div>
                {% endif %}
            </div>
            
            <div class="card-body">
                <h5 class="card-title fw-bold mb-2">{{ class.className }}</h5>
                
                <!-- ëª¨ì„ ì •ë³´ -->
                <div class="mb-3">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-calendar-alt text-primary me-2"></i>
                        <small class="text-muted">
                            {{ class.classStartDate }} ~ {{ class.classEndDate }}
                        </small>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-users text-success me-2"></i>
                        <small class="text-muted">ì°¸ì—¬ì {{ class.member_count }}ëª…</small>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="fas fa-map-marker-alt text-danger me-2"></i>
                        <small class="text-muted">
                            {% if 'ê°•ë‚¨' in class.className %}ê°•ë‚¨êµ¬
                            {% elif 'í™ëŒ€' in class.className %}ë§ˆí¬êµ¬
                            {% elif 'ì‹ ì´Œ' in class.className %}ì„œëŒ€ë¬¸êµ¬
                            {% elif 'ì´íƒœì›' in class.className %}ìš©ì‚°êµ¬
                            {% elif 'ê°•ë¶' in class.className %}ê°•ë¶êµ¬
                            {% else %}ì„œìš¸ ì „ì§€ì—­
                            {% endif %}
                        </small>
                    </div>
                </div>
                
                <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
                <div class="d-grid gap-2">
                    <button class="btn btn-success" onclick="applyClass({{ class.classID }})">
                        <i class="fas fa-plus"></i> ì°¸ì—¬í•˜ê¸°
                    </button>
                    <div class="btn-group" role="group">
                        <a href="{% url 'post_list' class.classID %}" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-comments"></i> ê²Œì‹œíŒ
                        </a>
                        <button class="btn btn-outline-secondary btn-sm" onclick="shareClass({{ class.classID }})">
                            <i class="fas fa-share"></i> ê³µìœ 
                        </button>
                        <button class="btn btn-outline-info btn-sm" onclick="favoriteClass({{ class.classID }})">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12">
        <div class="text-center py-5">
            <i class="fas fa-search fa-4x text-muted mb-3"></i>
            <h4 class="text-muted">
                {% if current_keyword %}
                    "{{ current_keyword }}"ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤
                {% else %}
                    {% if current_category != 'all' %}
                        {{ current_category|title }} ì¹´í…Œê³ ë¦¬ì— ëª¨ì„ì´ ì—†ìŠµë‹ˆë‹¤
                    {% else %}
                        ì•„ì§ ë“±ë¡ëœ ëª¨ì„ì´ ì—†ìŠµë‹ˆë‹¤
                    {% endif %}
                {% endif %}
            </h4>
            <p class="text-muted">
                {% if current_keyword %}
                    ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”!
                {% else %}
                    ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ìƒˆë¡œìš´ ëª¨ì„ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!
                {% endif %}
            </p>
            <a href="{% url 'classes' %}" class="btn btn-primary-custom">
                <i class="fas fa-refresh"></i> ì „ì²´ ëª¨ì„ ë³´ê¸°
            </a>
        </div>
    </div>
    {% endfor %}
</div>

<!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
{% if classes.has_other_pages %}
<div class="d-flex justify-content-center mt-5">
    <nav aria-label="Page navigation">
        <ul class="pagination pagination-lg">
            {% if classes.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ classes.previous_page_number }}&category={{ current_category }}&sort={{ current_sort }}&keyword={{ current_keyword }}">
                        <i class="fas fa-chevron-left"></i> ì´ì „
                    </a>
                </li>
            {% endif %}
            
            {% for num in classes.paginator.page_range %}
                {% if classes.number == num %}
                    <li class="page-item active">
                        <span class="page-link">{{ num }}</span>
                    </li>
                {% elif num > classes.number|add:'-3' and num < classes.number|add:'3' %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ num }}&category={{ current_category }}&sort={{ current_sort }}&keyword={{ current_keyword }}">{{ num }}</a>
                    </li>
                {% endif %}
            {% endfor %}
            
            {% if classes.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ classes.next_page_number }}&category={{ current_category }}&sort={{ current_sort }}&keyword={{ current_keyword }}">
                        ë‹¤ìŒ <i class="fas fa-chevron-right"></i>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>
</div>
{% endif %}

<!-- CSRF í† í° -->
<form style="display:none;">
    {% csrf_token %}
</form>

<!-- ë””ë²„ê·¸ ì •ë³´ (ê°œë°œ ì¤‘ì—ë§Œ í‘œì‹œ) -->
{% if debug %}
<div class="mt-5 p-3 bg-light border rounded">
    <h6>DEBUG ì •ë³´:</h6>
    <p>current_category: {{ current_category }}</p>
    <p>current_keyword: {{ current_keyword }}</p>
    <p>total_classes: {{ total_classes }}</p>
    <p>total_members: {{ total_members }}</p>
    <p>total_interests: {{ total_interests }}</p>
    <p>classes.count: {{ classes.paginator.count }}</p>
</div>
{% endif %}

<script>
console.log("=== DEBUG: class_search.html ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œë¨ ===");
console.log("ì´ í´ë˜ìŠ¤:", {{ total_classes }});
console.log("ì´ íšŒì›:", {{ total_members }});
console.log("ì´ ê´€ì‹¬ì‚¬:", {{ total_interests }});

// ëª¨ì„ ì‹ ì²­ í•¨ìˆ˜
function applyClass(classId) {
    console.log("applyClass í˜¸ì¶œë¨, classId:", classId);
    {% if request.session.member_id %}
        const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
        
        fetch(`/classes/${classId}/apply/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': csrfToken,
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('âœ… ' + data.message);
                location.reload();
            } else {
                alert('âŒ ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        });
    {% else %}
        alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
        window.location.href = '{% url "login" %}';
    {% endif %}
}

// ëª¨ì„ ê³µìœ  í•¨ìˆ˜
function shareClass(classId) {
    console.log("shareClass í˜¸ì¶œë¨, classId:", classId);
    const url = window.location.href;
    const text = `í¥ë¯¸ë¡œìš´ ëª¨ì„ì„ ë°œê²¬í–ˆì–´ìš”! í•¨ê»˜ ì°¸ì—¬í•´ë³´ì„¸ìš”!`;
    
    if (navigator.share) {
        navigator.share({
            title: 'ì†Œëª¨ì„ ì¶”ì²œ',
            text: text,
            url: url
        });
    } else {
        navigator.clipboard.writeText(url).then(() => {
            alert('ğŸ”— ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        });
    }
}

// ê´€ì‹¬ ëª¨ì„ ì¶”ê°€/ì œê±°
function favoriteClass(classId) {
    console.log("favoriteClass í˜¸ì¶œë¨, classId:", classId);
    alert('ğŸ’ ê´€ì‹¬ ëª¨ì„ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!');
}

// í˜ì´ì§€ ë¡œë“œ ì• ë‹ˆë©”ì´ì…˜
document.addEventListener('DOMContentLoaded', function() {
    console.log("DOMContentLoaded ì´ë²¤íŠ¸ ë°œìƒ");
    const cards = document.querySelectorAll('.card-custom');
    console.log("ì°¾ì€ ì¹´ë“œ ìˆ˜:", cards.length);
    
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
            card.style.transition = 'all 0.5s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
    });
});
</script>

<style>
.btn-group .btn {
    flex: 1;
}

.card-img-top {
    transition: transform 0.3s ease;
}

.card-custom:hover .card-img-top {
    transform: scale(1.05);
}

.pagination .page-link {
    border-radius: 8px;
    margin: 0 2px;
    border: 2px solid #e9ecef;
    color: #4285F4;
}

.pagination .page-item.active .page-link {
    background: linear-gradient(135deg, #4285F4, #34A853);
    border-color: #4285F4;
}

.pagination .page-link:hover {
    background-color: #f8f9fa;
    border-color: #4285F4;
}

@media (max-width: 768px) {
    .btn-group {
        flex-direction: column;
    }
    
    .stats-card {
        margin-bottom: 1rem;
    }
    
    .hero-section h1 {
        font-size: 2rem;
    }
}
</style>
{% endblock %}
>>>>>>> 5a4edcb6a4c3843af1a3137a75cee3f06ca8229b
